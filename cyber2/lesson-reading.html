<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>KiloByte SOC - Reading</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-950 min-h-screen text-slate-200">

  <main class="max-w-4xl mx-auto px-10 py-12 space-y-8">
    <a id="back" href="#" class="text-teal-400">← Back to Lesson</a>

    <header class="space-y-2">
      <h1 id="title" class="text-3xl font-semibold">Reading</h1>
      <p id="subtitle" class="text-slate-400"></p>
    </header>

    <section class="bg-slate-900/70 border border-slate-800 rounded-2xl p-6 space-y-4">
      <div id="content" class="space-y-4 text-slate-200"></div>

      <div class="pt-4 border-t border-slate-800 flex items-center justify-between">
        <p id="status" class="text-sm text-slate-400">Status: Not completed</p>
        <button id="mark"
          class="bg-teal-500 text-black px-5 py-2 rounded-xl font-medium hover:bg-teal-400 transition">
          Mark Reading Complete
        </button>
      </div>
    </section>
  </main>

  <script>
    function qp(name, fallback="") {
      const params = new URLSearchParams(window.location.search);
      return params.get(name) || fallback;
    }
    const unit = qp("unit","unit1");
    const lesson = qp("lesson","3.1.2");
    const KEY = `${unit}_${lesson}`;

    function getProg() {
      return JSON.parse(localStorage.getItem(KEY)) || { reading:false, lab:false, quiz:false };
    }
    function setProg(p) {
      localStorage.setItem(KEY, JSON.stringify(p));
    }

    document.getElementById("back").href = `lesson.html?unit=${encodeURIComponent(unit)}&lesson=${encodeURIComponent(lesson)}`;
    document.getElementById("title").textContent = `Reading: ${lesson}`;
    document.getElementById("subtitle").textContent = `Unit ${unit.toUpperCase()} • KiloByte SOC`;

    // Minimal starter content per lesson (we can expand each one next)
    const READINGS = {
      "3.1.2": [
        { h:"What is Cyber Ethics?", p:"Cyber ethics covers responsible behavior in digital systems: authorization, privacy, safety, and impact." },
        { h:"Rules of Engagement", p:"You should only test systems you are explicitly allowed to test. Consent and scope matter." },
        { h:"Real-world lens", p:"A defender is judged not just by skill, but by judgment and professionalism." }
      ],
      "3.1.1A": [
        { h:"Cybersecurity vs Hacking", p:"Cybersecurity focuses on protecting systems. 'Hacking' can be ethical (authorized) or malicious (unauthorized)." },
        { h:"Why definitions matter", p:"Clear definitions help you identify what’s allowed, what’s risky, and what’s illegal/unethical." }
      ],
      "3.1.1B": [
        { h:"Threat Actors", p:"Threat actors are people/groups who attempt harm or unauthorized access. They vary by motive and capability." },
        { h:"Motive examples", p:"Financial gain, espionage, disruption, reputation, or curiosity." }
      ]
    };

    const blocks = READINGS[lesson] || [
      { h:"Reading coming soon", p:"This lesson content hasn’t been written yet. You can add it to the READINGS map." }
    ];

    const content = document.getElementById("content");
    content.innerHTML = blocks.map(b => `
      <article class="space-y-1">
        <h2 class="text-xl font-semibold text-teal-300">${b.h}</h2>
        <p class="text-slate-200">${b.p}</p>
      </article>
    `).join("");

    const status = document.getElementById("status");
    const mark = document.getElementById("mark");

    function render() {
      const p = getProg();
      if (p.reading) {
        status.textContent = "Status: Completed ✅";
        mark.disabled = true;
        mark.textContent = "Completed";
        mark.classList.add("opacity-60","cursor-not-allowed");
      }
    }

    mark.addEventListener("click", () => {
      const p = getProg();
      p.reading = true;
      setProg(p);
      alert("✅ Reading marked complete!");
      render();
    });

    render();
  </script>
</body>
</html>
